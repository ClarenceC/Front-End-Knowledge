## this 关键字

在 JavaScript 中 this 是最复杂的机制之一。
很多程序员对 this 会有误解, 常见的有下面的情况:
1. 以为 this 是指向函数自身，其实不是，会被绑定的时候才会指向函数对象本身。
2. 把 this 理解成指向函数的作用域，会有某些情况下正确。

this 是在运行时进行绑定的，并不是编写时绑定，它的上下文取决于函数调用时的各种条件，并取决于函数的调用方式。当一个函数被调用时，会创建一个活动记录(执行上下文)，这个记录会包含函数在哪里被调用、函数的调用方式、传入参数等信息。this 就是这个记录的一个属性，会在函数执行的过程中用到。

### this 是如何被绑定

有下面几种方式来绑定 this 的:

- **默认绑定**, 函数直接使用不带任何修饰的函数引用进行调用的，就会默认绑定。如果在 strict mode 模式下则不会出现默认绑定。如果默认绑定函数在非 strict mode 下定义，在 strict mode下调用则不受影响。

```js
function foo() {
  console.log(this.a)
}
var a = 2
foo() // 2
```

- **隐匿绑定**, 需要考虑调用位置是否有上下文对象，或被某个对象拥有包含。

```js
function foo() {
  console.log(this.a)
}
var obj = {
  a: 2,
  foo: foo
}
var a = 3
obj.foo() // 2
```

